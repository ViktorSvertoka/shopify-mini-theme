# [ДЗ] Shopify: Частина 1. Аналіз продуктивності та способів підключення JavaScript у Shopify-темі

## Аналіз порядку виконання скриптів

### Inline

Виконується миттєво при парсингу HTML, тобто ще до завершення побудови DOM.  
У консолі лог з’являється першим, оскільки браузер одразу виконує вбудований
код.

### Через `script_tag`

Shopify генерує стандартний тег  
`<script src=".../script.js"></script>`,  
тому браузер зупиняє парсинг HTML, завантажує та виконує скрипт, а лише потім
продовжує побудову DOM. Цей спосіб також блокує рендеринг сторінки.

### `{% javascript %}` у секції або сніпеті

Shopify автоматично збирає всі такі скрипти у і додає їх у `<head>` із атрибутом
`defer`. Код виконується після побудови всього DOM, подібно до `defer`.

### Async

Скрипт завантажується паралельно з HTML, але виконується одразу після
завантаження файлу, незалежно від стану DOM.  
Порядок виконання непередбачуваний — залежить від часу завантаження.

### Defer

Скрипт завантажується паралельно з HTML, але виконується лише після повного
розбору DOM (після події `DOMContentLoaded`).  
Не блокує рендеринг сторінки й є найоптимальнішим для продуктивності.

## Порівняльна таблиця

| №   | Тип підключення               | Виконання                       | Блокує рендеринг | Примітка                            |
| --- | ----------------------------- | ------------------------------- | ---------------- | ----------------------------------- |
| 1   | Inline                        | Одразу при парсингу HTML        | ✅               | Найшвидший, але блокує рендеринг    |
| 2   | `script_tag` (звичайний)      | Одразу після inline             | ✅               | Також блокує рендеринг              |
| 3   | `{% javascript %}` (у секції) | Після побудови DOM              | ❌               | Виконується подібно до `defer`      |
| 4   | `async`                       | Одразу після завантаження файлу | ⚠️               | Порядок непередбачуваний            |
| 5   | `defer`                       | Після повного DOM               | ❌               | Найоптимальніший для продуктивності |

## Підсумок

Рекомендовано використовувати **`defer`** або **`{% javascript %}`** у секціях
для покращення продуктивності та підтримки модульності теми.

![Banner Product](./screenshot-01.png)

![Banner Product](./screenshot-02.png)
